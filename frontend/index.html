<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-H1VXNBLGM9"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-H1VXNBLGM9');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-site-verification" content="TifsYNObc3M5aPiZriMMcZv-6fLJUQwci5pcHfpEkZ8" />
    <title>Dream Dictionary|Explore Your Dream Meanings|AI Dream Analysis</title>
    <meta name="description" content="Discover the meaning behind your dreams with our AI-powered dream interpretation tool. Analyze dream symbols and gain insights into your subconscious mind.">
    <meta name="keywords" content="dream interpretation, dream analysis, dream meaning, dream symbols, AI dream interpreter, subconscious mind, dream psychology, dream dictionary">
    <link rel="icon" href="images/favicon.svg" type="image/svg+xml">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="header-top">
                <div class="header-left">
                    <h1><i class="fas fa-moon"></i> Dream Interpreter</h1>
                    <p>Explore the meaning behind your dreams</p>
                </div>
                <div class="header-right">
                    <button id="headerLoginBtn" class="header-login-btn">
                        <i class="fas fa-user"></i> Login
                    </button>
                    <div id="userProfileDropdown" class="user-profile-dropdown">
                        <div class="dropdown-profile">
                            <img id="userAvatar" src="" alt="User Avatar" class="profile-pic">
                            <span id="userDropdownName"></span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <ul class="dropdown-menu">
                            <li><a href="#" id="profileLink"><i class="fas fa-user-circle"></i> My Profile</a></li>
                            <li><a href="#" id="logoutLink"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <nav>
                <ul>
                    <li><a href="#" id="navHome" class="active">Home</a></li>
                    <li><a href="#" id="navHistory">Dream History</a></li>
                    <li><a href="#" id="navStats">Dream Stats</a></li>
                    <li><a href="#" id="navAbout">About</a></li>
                </ul>
            </nav>
        </header>

        <main>
            <!-- Home Section -->
            <section id="homeSection" class="page-section active">
                <div class="dream-input">
                    <h2><i class="fas fa-feather-alt"></i> Describe Your Dream</h2>
                    <textarea id="dreamInput" placeholder="Describe your dream in detail... The more specific you are, the better the interpretation will be."></textarea>

                    <div class="button-group">
                        <button id="interpretButton" class="primary-button"><i class="fas fa-search"></i> Interpret Dream</button>
                        <button id="clearButton" class="secondary-button"><i class="fas fa-eraser"></i> Clear</button>
                    </div>
                </div>

                <section class="results" id="results">
                    <!-- Results will be displayed here -->
                </section>
            </section>

            <!-- History Section -->
            <section id="historySection" class="page-section">
                <h2><i class="fas fa-history"></i> Your Dream History</h2>
                <div class="history-container" id="dreamHistory">
                    <p class="loading">Loading your dream history...</p>
                </div>
            </section>

            <!-- Stats Section -->
            <section id="statsSection" class="page-section">
                <h2><i class="fas fa-chart-pie"></i> Dream Statistics</h2>
                <div class="stats-container" id="dreamStats">
                    <p class="loading">Loading dream statistics...</p>
                </div>
            </section>

            <!-- About Section -->
            <section id="aboutSection" class="page-section">
                <h2><i class="fas fa-info-circle"></i> About Dream Interpretation</h2>
                <div class="about-content">
                    <p>Dream interpretation is the process of assigning meaning to dreams. Throughout history, people have sought to understand the mysterious content of dreams and their possible significance for our waking lives.</p>

                    <h3>Psychological Perspectives</h3>
                    <p>Different psychological traditions offer various frameworks for understanding dreams:</p>
                    <ul>
                        <li><strong>Freudian:</strong> Dreams represent unconscious desires and wish fulfillment</li>
                        <li><strong>Jungian:</strong> Dreams connect us to the collective unconscious and universal archetypes</li>
                        <li><strong>Cognitive:</strong> Dreams help process emotions and consolidate memories</li>
                        <li><strong>Neurological:</strong> Dreams are the result of random neural activity that the brain attempts to interpret</li>
                    </ul>

                    <h3>Cultural Traditions</h3>
                    <p>Many cultures have rich traditions of dream interpretation:</p>
                    <ul>
                        <li><strong>Chinese:</strong> Dreams may be messages from ancestors or predictions of future events</li>
                        <li><strong>Native American:</strong> Dreams are considered a way to communicate with spirits and receive guidance</li>
                        <li><strong>Ancient Egyptian:</strong> Dreams were considered messages from the gods</li>
                        <li><strong>Greek and Roman:</strong> Dreams were seen as direct messages from deities or the dead</li>
                    </ul>

                    <h3>Our Approach</h3>
                    <p>Our dream interpreter combines insights from psychology, cultural traditions, and modern research to provide a balanced perspective on your dreams. We analyze the symbols and themes in your dream description to offer possible interpretations and reflection questions.</p>

                    <div id="modelInfo" class="model-info-section">
                        <!-- Model info will be dynamically inserted here -->
                        <h4>Dream Engine Status</h4>
                        <p>Loading model information...</p>
                    </div>

                    <p>Remember that the most meaningful interpretation of a dream is often the one that resonates with your own experiences and intuition.</p>
                </div>
            </section>

            <section id="loginSection" class="page-section">
                <h2><i class="fas fa-user"></i> Login</h2>
                <div class="login-container">
                    <input type="text" id="username" placeholder="Username" required>
                    <input type="password" id="password" placeholder="Password" required>
                    <div class="button-group">
                        <button id="loginButton" class="primary-button"><i class="fas fa-sign-in-alt"></i> Login</button>
                        <button id="registerButton" class="secondary-button"><i class="fas fa-user-plus"></i> Register</button>
                    </div>
                    <div class="social-login">
                        <p class="or-divider">OR</p>
                        <button id="googleLoginButton" class="google-button">
                            <i class="fab fa-google"></i> Sign in with Google
                        </button>
                    </div>
                    <p id="loginMessage" class="message"></p>
                </div>
            </section>

            <section class="disclaimer">
                <p><strong>Disclaimer:</strong> Dream interpretations are provided for entertainment and reflection purposes only. They are not a substitute for professional psychological advice.</p>
            </section>
        </main>

        <footer>
            <div class="footer-content">
                <div class="footer-row">
                    <p>Dream Interpreter &copy; 2025 All Rights Reserved</p>
                    <p><a href="#" id="privacyLink">Privacy Policy</a></p>
                    <p>Email: ytsgabcde16@2925.com</p>
                    <p>Powered by AI Dream Analysis Technology</p>
                    <p><a href="https://beian.miit.gov.cn/" target="_blank" rel="noopener noreferrer">渝ICP备2024032264号-70</a></p>
                </div>
            </div>
        </footer>
    </div>

    <!-- Privacy Policy Modal -->
    <div id="privacyModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Privacy Policy</h2>
            <div class="policy-content">
                <p><strong>Last Updated:</strong> June 1, 2025</p>

                <h3>1. Introduction</h3>
                <p>Welcome to Dream Interpreter. We respect your privacy and are committed to protecting your personal data. This privacy policy explains how we collect, use, and safeguard your information when you use our dream interpretation service.</p>

                <h3>2. Information We Collect</h3>
                <p>We collect the following types of information:</p>
                <ul>
                    <li><strong>Dream Content:</strong> The dreams you submit for interpretation.</li>
                    <li><strong>User ID:</strong> A randomly generated identifier stored on your device to track your dream history.</li>
                    <li><strong>Usage Data:</strong> Information about how you interact with our service, including access times and pages viewed.</li>
                    <li><strong>Device Information:</strong> Basic information about your device and browser.</li>
                    <li><strong>Analytics Data:</strong> We use Google Analytics to collect anonymous data about site usage, including page views, session duration, and user demographics.</li>
                </ul>

                <h3>3. How We Use Your Information</h3>
                <p>We use your information for the following purposes:</p>
                <ul>
                    <li>To provide dream interpretations</li>
                    <li>To maintain your dream history</li>
                    <li>To generate anonymous statistics about dream themes</li>
                    <li>To improve our interpretation algorithms</li>
                    <li>To ensure the security and functionality of our service</li>
                    <li>To analyze website traffic and user behavior through Google Analytics</li>
                    <li>To optimize our website design and user experience based on analytics data</li>
                </ul>

                <h3>4. Data Storage and Security</h3>
                <p>Your dream content is stored locally on our servers with appropriate security measures. We implement reasonable security practices to protect your information from unauthorized access or disclosure.</p>

                <h3>5. Sharing Your Information</h3>
                <p>We do not sell, trade, or otherwise transfer your personally identifiable information to third parties. Anonymous, aggregated data about dream themes and symbols may be used for research or shared with partners.</p>

                <h3>6. Your Rights</h3>
                <p>You have the right to:</p>
                <ul>
                    <li>Access your dream history</li>
                    <li>Delete your dream history</li>
                    <li>Opt out of data collection (note that this will limit functionality)</li>
                </ul>

                <h3>7. Cookies and Local Storage</h3>
                <p>We use local storage to save your user ID and preferences. This helps us provide a personalized experience and maintain your dream history between sessions.</p>

                <h4>Google Analytics</h4>
                <p>We use Google Analytics to understand how visitors interact with our website. Google Analytics uses cookies to collect information about your visit, including:</p>
                <ul>
                    <li>Pages you visit and how long you stay on each page</li>
                    <li>The website you came from (if applicable)</li>
                    <li>What type of browser, device, and operating system you're using</li>
                    <li>Your IP address (anonymized)</li>
                    <li>General geographic location (city/country level)</li>
                </ul>
                <p>This information helps us improve our service and user experience. Google Analytics data is processed in a way that does not personally identify you. You can learn more about Google's data practices by visiting <a href="https://policies.google.com/privacy" target="_blank">Google's Privacy Policy</a>.</p>

                <p>If you prefer to opt out of Google Analytics tracking, you can install the <a href="https://tools.google.com/dlpage/gaoptout" target="_blank">Google Analytics Opt-out Browser Add-on</a>.</p>

                <h3>8. Children's Privacy</h3>
                <p>Our service is not intended for children under 13 years of age, and we do not knowingly collect personal information from children under 13.</p>

                <h3>9. Changes to This Policy</h3>
                <p>We may update this privacy policy from time to time. We will notify you of any changes by posting the new policy on this page and updating the "Last Updated" date.</p>

                <h3>10. Contact Us</h3>
                <p>If you have any questions about this privacy policy, please contact us at: ytsgabcde16@2925.com</p>
            </div>
        </div>
    </div>

    <script src="js/config.js"></script>
    <script src="js/offline-mode.js"></script>
    <script src="js/script.js"></script>
    <script>
        // 页面加载完成后手动添加事件监听
        document.addEventListener('DOMContentLoaded', function() {
            // 手动添加登录按钮事件处理程序
            const loginBtn = document.getElementById('loginButton');
            if (loginBtn) {
                console.log('Login button found by inline script');
                loginBtn.onclick = function(e) {
                    e.preventDefault();
                    console.log('Login button clicked! (inline handler)');
                    
                    const username = document.getElementById('username').value;
                    const password = document.getElementById('password').value;
                    
                    // 验证输入
                    if (!username || !password) {
                        document.getElementById('loginMessage').textContent = 'Username and password are required';
                        document.getElementById('loginMessage').className = 'message error';
                        return;
                    }
                    
                    // 显示加载状态
                    document.getElementById('loginMessage').textContent = 'Logging in...';
                    document.getElementById('loginMessage').className = 'message';
                    
                    // 发送登录请求
                    fetch('/api/login', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ username, password })
                    })
                    .then(response => response.json())
                    .then(data => {
                        if (data.token) {
                            // 存储用户信息和令牌
                            localStorage.setItem('user', JSON.stringify({
                                userId: data.user_id,
                                username: data.username,
                                token: data.token
                            }));
                            
                            // 显示成功消息
                            document.getElementById('loginMessage').textContent = `Welcome, ${data.username}!`;
                            document.getElementById('loginMessage').style.color = 'green';
                            
                            // 跳转到主页
                            setTimeout(() => {
                                document.getElementById('navHome').click();
                                location.reload(); // 重新加载页面以更新UI
                            }, 1000);
                        } else {
                            document.getElementById('loginMessage').textContent = data.error || 'Login failed';
                            document.getElementById('loginMessage').className = 'message error';
                        }
                    })
                    .catch(error => {
                        console.error('Login error:', error);
                        document.getElementById('loginMessage').textContent = 'Login failed: ' + error.message;
                        document.getElementById('loginMessage').className = 'message error';
                    });
                };
            } else {
                console.error('Login button not found by inline script!');
            }
            
            // 谷歌登录按钮处理
            const googleLoginBtn = document.getElementById('googleLoginButton');
            if (googleLoginBtn) {
                console.log('Google login button found by inline script');
                googleLoginBtn.onclick = function(e) {
                    e.preventDefault();
                    console.log('Google login button clicked! (inline handler)');
                    
                    // 提取域名
                    let hostname = window.location.hostname;
                    let mainDomain = 'qhdsalsm.com';
                    try {
                        hostname = hostname.replace(/^(https?:\/\/)?(www\.)?/i, '').split('/')[0];
                        const parts = hostname.split('.');
                        if (parts.length >= 2) {
                            mainDomain = parts.slice(-2).join('.');
                        } else if (hostname) {
                            mainDomain = hostname;
                        }
                    } catch (error) {
                        console.error('Error extracting domain:', error);
                    }
                    
                    const callback = encodeURIComponent(window.location.href);
                    console.log('Redirecting to Google login with domain:', mainDomain);
                    window.location.href = `https://aa.jstang.cn/google_login.php?url=${mainDomain}&redirect_uri=${callback}`;
                };
            } else {
                console.error('Google login button not found by inline script!');
            }
        });
    </script>
</body>
</html>